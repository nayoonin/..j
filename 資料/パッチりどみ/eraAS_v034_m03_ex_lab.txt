2018/11/17

eraAS_ver0.34用차세대창조改造

차세대창조のエラー修正しつつ、目についた部分を改良




◆対象環境
[era0000058]eraAS ver0.34

以下のパッチはマージ済み
[era0000060]eraAS_ver0.34用キャラソート強化パッチ
[era0000065]eraAS_0.34用  아인耳髪一致パッチ
	・ファイルを正しい位置に移動、[era0000079]も内容的には同一
[era0000071]STATUS画面に수반부대、후방부대、회수부대としての能力を表示するパッチ
	・@DIM_TABLE_CVAR/@C_GET_CVAR_VALUEの参照対象変数に"EXTRA"を追加
	　"CFLAG"等は対象変数を直接参照するのに対し、"EXTRA"はVAR_ID準拠で分岐して参照を行います
	　乱数が絡むような処理でもなければ自由に設定することができます
	　単一変数の参照しか想定してなかったんでそりゃ使いにくかろうなぁと思った
	　INFO_STATUS側の例外処理は差し戻してあります
	・マスクデータであった場合
	　@DIM_TABLE_LABEL_LISTのLABEL_LIST19を差し戻せば消えます
	　個人的には「都市」のAIに聞いたらこれくらいの情報は教えてくれそうだと思う
[era0000077]eraAS_ver0.34用창녀を口説くパッチ


[era0000080]は取り込んでないが競合もしないはず



◆内容
・차세대창조のバグ修正
　キャンセルで종족が固定されるバグの修正
　CFLAG:機関評価の更新漏れにも気づいたので修正
・継承処理で명가と푸른혈족は母親の状態をかならず継承、기억처리완료は不自然なので消去
　「시스터」は残っててもいいと思う（実態がよくわからんし）
・継承処理で모체레벨/난자레벨の乱数幅を増やし、成長期待値を1上昇
　この乱数は페로몬系の継承にもそのまま流用
・페로몬系も母親の影響を受けるように変更
　基本的には世代を重ねるたびに優秀な雌となっていくように
　これに伴って모체레벨/난자레벨と同様に、とりうる数値の範囲を0～99に変更
　페로몬20で周囲の男が我慢できなくなるくらいだってのに99とかどうなるんだよ
・명가が誕生した際に시조を共有する親族にもTALENT:명가をばらまくように
　この処理を行うために、CFLAG:주민_시조として시조の개별번호を記録することに（同様に母親の番号も記録）
　개별번호なので、FINDCHARAで使用してください
　
　명가誕生の際には次世代、母親、시조に푸른혈족が付与されます
　以後の直系は푸른혈족を必ず継承します
　傍系は명가は継承できるが푸른혈족はつかない（最初から시조が持ってた場合を除く）
　시조～直近の母親までの血筋も푸른혈족つかないけど、これの判定は自分にはいくら考えても無理だった
・차세대창조時に시조が見つかればCFLAG:차세대창조자손수に加算するように
　시조を起点に何名創造されたのかわかります
・「선조회귀」の挙動変更、시조の素質を再現する（見つからないなら母親をコピーする）
　매력포인트等、一部要素は再現されません



◆追加変数
CFLAG
1316,차세대창조자손수,;시조側に加算する数値、累計でどれだけの子孫が創造されたかわかります
6921,주민_시조,;시조の개별번호
6922,주민_母親,;母親の개별번호

TALENT
3511,시조,;これが1になることはないが、表示処理で使う



◆つくったひと：morph
・morphのつくった以外のところの扱いはつくったひとに聞いて下さい
・配布・改造・流用、好きにしてください
・でも、その際のサポートは自分でやってね

※　era＝R-18全般の常識的な取り扱いとして例えば以下のような事はやめて下さい

・未成年者がいっぱいいる場所で広める
・R-18以外のモノをメインに扱ってる場所で取り上げる
