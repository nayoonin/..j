2018/10/07
eraAS0.3 修正パッチまとめ20181007


◆せつめい
このパッチは以下の三種類のパッチをマージし
　[era003928]　eraAS 0.3 修正パッチまとめ
　[era003964]　eraAS 0.3 気になった点パッチ
　[era003977]　eraAS 0.3 対陣戦発生条件ほかパッチ

さらに
・一部の誤字と思われる表記を修正
・異界接続でのエラー落ちの防止処理を追加
・차세대창조にて一部の素質が継承されないバグを修正
・起動エラーを修正
したものです

merged_patchesフォルダにリドミ入れときました
「本体取り込み時にリドミ不要」と書いてあるものもあったがパッチなんでリドミ同包しときます
あとどれがどれだかわかりやすいようにリドミのファイルネームを若干リネームしちってます（すまんね）



◆対象環境
eraAS 0.3バニラ環境
修正パッチ系のみ適用しているなら問題ないとは思うが保証できない



◆当パッチで作業した修正箇所
ERB/外界調査/RPG_START.ERB
　205行目
　　買い物客の姿無く店内は不気味なほどに静まり返っている…
　　　↓
　　買い物客の姿は無く店内は不気味なほどに静まり返っている…
　244行目
　　白骨化した死体がうつ伏せに倒れている、食べれるものがなく餓死したようだ…
　　　↓
　　白骨化した死体がうつ伏せに倒れている、食べられるものがなく餓死したようだ…
　248行目
　　まだ使用だれているプリペイドカードがある
　　　↓
　　まだ使用されているプリペイドカードがある
　271行目
　　住宅地のど真ん中に戦車が鎮座している、だが砲身は曲り車輪もひしゃげている…
　　　↓
　　住宅地のど真ん中に戦車が鎮座している、だが砲身は曲がり車輪もひしゃげている…
　318行目
　　「鼻を劈き」は保留
　　個人的には「つんざく」は轟音に対して使うものであり
　　慣用句としては「鼻をつき」だと思うが断言できるほど自信がなかったのでそのままにした
　　この場合の「つき」は「突き」「衝き」らしいが正直、馴染みのない漢字表記である

ERB/経過イベント/日常イベント.ERB
　201行目
　　だが裏路地付近に視線をやるとふと覚えのある男女が見えた、%CSTR:二人称%の同僚と上司のようだ。
　　　↓
　　だが裏路地付近に視線をやるとふと覚えのある男女が見えた、%CALLNAME%の同僚と上司のようだ。

ERB/都市関連/襲撃/CITY_襲撃.ERB
　16行目
　　≪内容は以上です、各人の検討を祈ります≫
　　　↓
　　≪内容は以上です、各人の健闘を祈ります≫

ERB/本体/スカウト/異界接続.ERB
　例外処理を入れた
　ちょっと遊んでみたぞ

ERB/都市関連/都市/시설/CITY_F_폐기장.ERB
　使用していない変数でエラー吐いたのを削除

ERB/都市関連/都市/시설/CITY_F_연구시설.ERB
　・身体強化の際にMONEYが足りなくても実行できたのを修正
　@CITY_F_52_GC_HEREDY
　　・バグ修正
　　　ループの範囲指定が全体的にミスっていて末尾の素質が継承漏れしていたのはバグだと判断して修正
　　　継承されないようになっていた素質は以下
　　　[항문광]、[중독되기쉬움]、[중독되기어려움]、[비관적]、[낙관적]、[광기]、[소극적]、[눈에띄고싶음]
　　　[무관심]、[정조관념없음]、[정조관념]、[억압]、[해방]、[저항]、[백치녀]、[천재]
　　・ついでに広域変数COUNTの使用を廃止
　　　この変数でないとできないという処理でもないので使用は避けるべき



◆その他
　スレで指摘されている차세대창조のバランス関連は放置
　自分ももっと強くていいと思うが下手な調整をすると極度にインフレするのでそこら辺を警戒しているものと推測
　ネコさんの意図や方針が불명なので参考例を投げておきます
　
　例１）親のステータス×1.05
　　・「親のステータスに5％보너스」であるため、元の数値が大きいと増加効率が上がる
　　・初期値100で100世代重ねると11979、わーお
　　・たいしたことないように見える係数でもこの結果である
　　
　例２）親のステータス＋親のステータスの平方根
　　・元の数値が大きいほど増加値も増えるが増加値の伸びは徐々に抑制される
　　　ちなみに100のとき増加値10（＝10％）なのでスタートダッシュはx1.05より上
　　　x == 400の時の増加値（＝20）がxの5％になるので、これ以降の増加効率はx1.05に追い抜かれる
　　・初期値100で100世代重ねると3444
　　・単なる係数よりは落ち着いた結果になる
　　・これよりもさらに成長抑制しようと思ったら親のステータスコピーしつつ固定値보너스、世代数は関係なしとかそんなん
　　　固定値10でも100世代なら1000程度ですね（計算するまでもないか）
　　　個人的にはかなり資金を必要とするので次世代は親よりも強くあってほしい
　
　平方根式補正実装例
　　CFlag:주민_ATK += (CFlag:L_I:주민_ATK/20)*(1+(L_C3/100))+(L_C3/5)+(L_C2*2)
　　　↓
　　CFlag:주민_ATK = CFlag:L_I:주민_ATK + SQRT(MAX(1, CFlag:L_I:주민_ATK + L_C3))+(L_C3/5)+(L_C2*2)
　　
　　※現状の係数「*(1+(L_C3/100))」は世代数100周期で効果が出るもので、ほぼ機能してないと思う

;適当につくったテスト用関数
@TEST_GENERATION_105
LOCAL = 100
FOR LOCAL:1, 0, 100
	TIMES LOCAL, 1.05
NEXT
PRINTFORMW 100世代後{LOCAL}

@TEST_GENERATION_SQRT
LOCAL = 100
FOR LOCAL:1, 0, 100
	LOCAL += SQRT(LOCAL)
NEXT
PRINTFORMW 100世代後{LOCAL}



◆つくったひと：morph
・morphのつくった以外のところの扱いはつくったひとに聞いて下さい
・配布・改造・流用、好きにしてください
・でも、その際のサポートは自分でやってね

※　era＝R-18全般の常識的な取り扱いとして例えば以下のような事はやめて下さい

・未成年者がいっぱいいる場所で広める
・R-18以外のモノをメインに扱ってる場所で取り上げる
